

<br><br>
  <form class="form form-horizontal" id="form" method="post" action="{:\\think\\Url::build('Orderinfo/newiegroup','')}">
	

   </form>  
 <DIV class=simpleCart_items>
 
 </DIV>
<br><hr>

<br><hr>
	<!--a href="javascript:;" class="simpleCart_checkout">支付</a-->	
	<button type="button"  onclick="pay()" id="pay" class="btn btn-primary radius">&nbsp;&nbsp;支付&nbsp;&nbsp;</button>

<br><hr>

<script type="text/javascript">
<!--
	simpleCart({
	
	// array representing the format and columns of the cart, see 
	// the cart columns documentation
	cartColumns: [
		{ attr: "proid" , label: "产品号" },
		{ attr: "name" , label: "产品" },
		{ attr: "price" , label: "价格"},
		{ view: "decrement" , label: false },
		{ attr: "quantity" , label: "数量" },
		{ view: "increment" , label: false },
		{ attr: "maxnum" , label: "最大数量" },
		{ attr: "total" , label: "总价" },
		{ view: "remove" , text: "删除" , label: false }
		
		
	],
	
	// "div" or "table" - builds the cart as a table or collection of divs
	cartStyle: "table", 
	
	// how simpleCart should checkout, see the checkout reference for more info 
	checkout: { 
        type: "SendForm" , 
        url: "{:\\think\\Url::build('Orderinfo/newiegroup','')}" ,

        // http method for form, "POST" or "GET", default is "POST"
        method: "POST" , 

        // url to return to on successful checkout, default is null
        success: null , 

        // url to return to on cancelled checkout, default is null
        cancel: null ,

        // an option list of extra name/value pairs that can
        // be sent along with the checkout data
        extra_data: {}
        },
	
	// set the currency, see the currency reference for more info
	currency: "JPY",
	
	// collection of arbitrary data you may want to store with the cart, 
	// such as customer info
	data: {},
	
	// set the cart langauge (may be used for checkout)
	language: "zh-cn",
	
	// array of item fields that will not be sent to checkout
	excludeFromCheckout: [],
	
	// custom function to add shipping cost
	shippingCustom: null,
	
	// flat rate shipping option
	shippingFlatRate: 0,
	
	// added shipping based on this value multiplied by the cart quantity
	shippingQuantityRate: 0,
	
	// added shipping based on this value multiplied by the cart subtotal
	shippingTotalRate: 0,
	
	// tax rate applied to cart subtotal
	taxRate: 0,
	
	// true if tax should be applied to shipping
	taxShipping: false,
	
	// event callbacks 
	beforeAdd				: null,
	afterAdd				: null,
	load					: null,
	beforeSave				: null,
	afterSave				: null,
	update					: null,
	ready					: null,
	checkoutSuccess				: null,
	checkoutFail				: null,
	beforeCheckout				: null
});
simpleCart.bind( 'load' , function(){
 simpleCart.empty(); 
});





var demo=$(".form").Validform({
		 tiptype:2,
            ajaxPost:true,
            showAllError:true,
		callback:function(ret){
			 ajax_progress(ret);
			
		}
	});


	//var demo=$(".form").Validform();


function pay()
{
	var varformdata=simpleCart.CollectFormData();//返回对象
	//alert(varformdata.length);
	if(varformdata.length>0)
	{	
		var str_t='<input type=hidden name=itemCount value="'+(varformdata.length).toString()+'">';
		for(var i=0;i<varformdata.length;i++)
		{
			var proid=varformdata[i].fields()['proid'];	
			var quan=varformdata[i].quantity();	
		   str_t=str_t+"<input type=hidden name=\"item_id_"+(1+i)+"\" value="+proid.toString()+">";
		   str_t=str_t+"<input type=hidden name=\"item_quantity_"+(1+i)+"\" value="+quan.toString()+">";
		
      
	
		}
		$(".form").empty();
		$(".form").append(str_t);
		
		demo.ajaxPost();

	}
}





//-->
</script>






